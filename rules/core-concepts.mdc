# 💡 Core Concepts

This document defines fundamental concepts, terminology, and principles underpinning the Unified Agent Framework. Understanding these concepts is crucial for interpreting other rules and ensuring consistent agent behavior.

**Key Concepts:**
# 💡 Core Concepts

This document outlines the fundamental principles governing the Unified Agent Framework.

**Key Concepts:**

*   🔑 **Request ID (`requestId`):** A unique identifier for a specific user request being processed by the agent framework. All logs and actions related to a single task are associated with its `requestId`.
*   🧑‍💻 **Agent Roles:** Specialized functional units designed to perform specific types of tasks (e.g., `BuilderAgent`, `AuditAgent`). See [Agent Roles & Responsibilities](mdc:rules-md/agent-roles.md) for detailed definitions and interaction patterns.
*   📁 **Log File:** The primary mechanism for state persistence, communication, and coordination, located at `logs/<requestId>.json`. It MUST be treated as an append-only JSON array. See [Log Handling & Coordination](mdc:rules-md/log-handling.md) for structure and usage rules.
*   ➡️ **`nextAgent` Field:** The critical field within a log entry that dictates the *immediate* and *automatic* transition to the next agent role. This field is **read and acted upon by the framework itself** after a successful log append (see [Execution Loop Step 10](mdc:rules-md/execution-loop.md#step-10-%EF%B8%8F-framework-action---execute-immediate-automatic-transition)). It is the **sole trigger** for workflow progression. Agents **must** log this field correctly. See [Log Handling - Automatic Transitions](mdc:rules-md/log-handling.md#automatic-transitions-via-nextagent).
*   🚀 **ACTION IMPERATIVE:** The core principle that agents **must** continuously execute actions based *only* on the log state and transition based *only* on the `nextAgent` field logged by the *previous* agent, without waiting for user prompts or confirmations. This is enforced by the [Core Execution Loop](mdc:rules-md/execution-loop.md).
*   🛠️ **Tools:** Capabilities available to agents for interacting with the environment (e.g., `edit_file`, `run_terminal_cmd`, custom scripts). See the [Mandatory MCP Toolchain](mdc:rules-md/system-prompt.md#🛠-mandatory-mcp-toolchain) and guidelines for [Custom Tools](mdc:rules-md/system-prompt.md#🛠-custom-tool-development--usage).
*   📜 **Rules (`.cursor/rules/` & `rules-md/`):** Configuration files (`.mdc`) defining agent behavior, project standards, and workflows. This includes agent-specific logic ([`agents/`](mdc:rules-md/agent-roles.md)), shared guidelines ([`shared-core.md`](mdc:rules-md/shared-core.md)), core procedures (e.g., [`initialization-procedure.md`](mdc:rules-md/initialization-procedure.md)), and the overall structure defined in the [System Prompt](mdc:rules-md/system-prompt.md).
*   ⚙️ **Framework:** The underlying execution engine (external to the agent's direct control) that reads the log file, interprets the `nextAgent` field, loads the appropriate agent rules, and enforces the [Core Execution Loop](mdc:rules-md/execution-loop.md).
*   **Autonomous Execution:** Agents operate independently, driven by the state logged in `logs/<requestId>.json`. User interaction is limited to providing diagnostic data when explicitly requested by an agent (See [Execution Loop](mdc:rules-md/execution-loop.md) Step 6).
*   **Log-Driven Coordination:** The `logs/<requestId>.json` file is the *single source of truth* for state, handoff instructions (`handoffMessage`), and the crucial `nextAgent` field which dictates the immediate, automatic transition between agents. (See [Log Handling](mdc:rules-md/log-handling.md)).
*   **Specialized Agents:** Each agent role possesses specific skills and responsibilities, defined in their respective `.mdc` files (e.g., `BuilderAgent`, `AuditAgent`). See [Agent Roles](mdc:rules-md/agent-roles.md).
*   **Immediate Transitions:** The framework enforces *instantaneous* transitions between agents based *solely* on the `nextAgent` field in the latest log entry. There is **no waiting** for user confirmation or external triggers.
*   **Direct Peer Handoffs:** Agents can (and should, when logical) directly hand off tasks to other specialized agents (e.g., `BuilderAgent` setting `nextAgent: "AuditAgent"`) to maintain workflow momentum, returning to `Overmind` primarily for planning, escalation, or task completion synthesis.
*   **🌟 Self-Improvement Loop:** The framework includes mechanisms for agents to analyze past performance (via logs, potentially chat history) and automatically refine or generate rules (`.mdc` files) to improve future execution efficiency and accuracy. This is often orchestrated by dedicated `ImprovementAgent`s.
*   **🤖 Learning Agents:** Specific agent roles (like `ImprovementAgent`, `RuleWriterAgent`) are designed to analyze data, extract patterns, and modify the framework's own ruleset.
*   **🌍 Global Rules:** Core, foundational rules (`.cursor/rules/global/*.mdc`) defining agent behavior, tool usage, and general best practices, applicable across projects.
*   **🏗️ Project Rules:** Specific rules (`.cursor/rules/project/*.mdc`) tailored to a particular project's needs, overriding or augmenting global rules. Agents must prioritize these when present. 