---
description: "[TODO: Add description]"
globs:
  - "*.*"
alwaysApply: false
---

# ðŸ“š Tool Guide: Consolidate Rules (`consolidate_rules.py`)

## 1. PURPOSE

Scans a directory for `.mdc` files and combines their contents into a single output Markdown file. Primarily used for documentation or creating unified rule views.

## 2. USAGE

*   **Command:** `python tools/consolidate_rules.py --output_file <path_to_output.md> [--rules_dir <path_to_rules>] [--exclude_patterns <pattern1,pattern2>] [--include_header <true|false>]`
*   **Executor:** Use via `run_terminal_cmd`.
*   **Arguments:**
    *   `--output_file`: REQUIRED. Path for the consolidated output Markdown file.
    *   `--rules_dir`: Optional. Directory to scan. Defaults to `.cursor/rules`.
    *   `--exclude_patterns`: Optional. Comma-separated glob patterns to exclude (relative to `rules_dir`).
    *   `--include_header`: Optional (`true`/`false`). Include `## Source: <path>` header for each file. Defaults to `true`.
*   **Prerequisites:** Python environment.
*   **Output (stdout):** Prints status messages (files found/processed, output path, errors). The main output is the created file.
*   **Exit Code:** Assumed 0 for success, non-zero for errors (e.g., file I/O issues).

## 3. TYPICAL AGENTS

*   `RunnerAgent`: Executes the script as part of a documentation or build task.
*   `DocsAgent`: Might trigger this via `RunnerAgent` to generate combined documentation.

## 4. HOW TO USE (Agent Logic)

1.  Determine required arguments, especially `--output_file`. Decide on optional arguments (`--rules_dir`, `--exclude_patterns`, `--include_header`).
2.  Construct the full command string.
3.  Execute the command via `run_terminal_cmd`.
4.  Check the exit code and review `stdout` for success or error messages.
5.  Report the outcome (success/failure, output file path, errors) via MCP task description.

## 5. EXAMPLE COMMAND & OUTPUT

**Command:**
```bash
python tools/consolidate_rules.py --output_file docs/all_rules.md --exclude_patterns "project/*,**/temp*"
```

**Example `stdout`:**
```
Found 15 files.
Processing file: core/agent.mdc
Processing file: core/loop.mdc
...
Successfully consolidated rules to: docs/all_rules.md
```

## 6. CONSIDERATIONS

*   Ensure the output directory exists and is writable.
*   Glob patterns in `--exclude_patterns` must be correctly formatted and quoted if necessary in the shell.
*   The script assumes `.mdc` files contain valid Markdown.
*   Large numbers of files might take time or generate a very large output file.
*   The script path in the command (`tools/consolidate_rules.py`) assumes execution from the workspace root.
